{"ast":null,"code":"var _jsxFileName = \"/Users/siggy/Allcode/tests/ol-acc-msg/frontend/src/components/InteractionContent/Form.tsx\",\n  _s = $RefreshSig$();\nimport React from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MAX_CHARS = 280;\nexport const Form = _ref => {\n  _s();\n  let {\n    onSubmit,\n    title,\n    cta,\n    loading\n  } = _ref;\n  const [content, setContent] = React.useState(\"\");\n  const [validationError, setValidationError] = React.useState(\"\");\n  const inputRef = /*#__PURE__*/React.createRef();\n  const errorMessage = {\n    limitMaxChar: `Input ${MAX_CHARS} character limit reached`,\n    empty: `${title} input cannot be empty`\n  };\n  const isValid = text => {\n    if (text.length < 1) {\n      var _inputRef$current;\n      setValidationError(errorMessage[\"empty\"]);\n      (_inputRef$current = inputRef.current) === null || _inputRef$current === void 0 ? void 0 : _inputRef$current.focus();\n      return false;\n    }\n    if (text.length === MAX_CHARS) {\n      var _inputRef$current2;\n      setValidationError(errorMessage[\"limitMaxChar\"]);\n      (_inputRef$current2 = inputRef.current) === null || _inputRef$current2 === void 0 ? void 0 : _inputRef$current2.focus();\n      return false;\n    }\n    setValidationError(\"\");\n    return true;\n  };\n  const handleOnChange = e => {\n    const text = e.target.value;\n    setContent(text);\n    isValid(text.trim());\n  };\n  function handleSubmit(e) {\n    e.preventDefault();\n    if (isValid(content)) {\n      onSubmit(content.trim());\n      setContent(\"\");\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit,\n    className: \"flex flex-none flex-col\",\n    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n      htmlFor: `${title}-input`,\n      className: \"sr-only\",\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"font-bold\",\n        children: title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n      id: `${title}-input`,\n      ref: inputRef,\n      className: `p-1 my-1 grow bg-neutral-100 border-2 hover:border-sky-500 active:border-sky-500\n                border-neutral-200 rounded \n                ${validationError.length > 0 ? \"border-rose-600\" : \"\"}\n                `,\n      onChange: handleOnChange,\n      value: content,\n      maxLength: MAX_CHARS,\n      rows: 4\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"h-5 text-xs text-rose-600 italic\",\n      \"aria-live\": \"polite\",\n      children: validationError ? validationError : \"\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"submit\",\n      className: `py-2 rounded w-1/2 bg-sky-200\n                 hover:bg-sky-300 focus:bg-sky-300 self-end\tdisabled:bg-neutral-200`,\n      disabled: !!validationError.length || loading,\n      children: cta\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 9\n  }, this);\n};\n_s(Form, \"NClApH1BLVnSTiufbXCvyaivQQ0=\");\n_c = Form;\nvar _c;\n$RefreshReg$(_c, \"Form\");","map":{"version":3,"names":["React","MAX_CHARS","Form","onSubmit","title","cta","loading","content","setContent","useState","validationError","setValidationError","inputRef","createRef","errorMessage","limitMaxChar","empty","isValid","text","length","current","focus","handleOnChange","e","target","value","trim","handleSubmit","preventDefault"],"sources":["/Users/siggy/Allcode/tests/ol-acc-msg/frontend/src/components/InteractionContent/Form.tsx"],"sourcesContent":["import React from \"react\";\n\ninterface Props {\n    onSubmit: (content: string) => void;\n    title: string;\n    /** cta - Call to Action, the form's submit button text */\n    cta: string;\n    /** if true, will to disable submit button */\n    loading: boolean;\n}\nconst MAX_CHARS = 280;\n\nexport const Form = ({ onSubmit, title, cta, loading }: Props) => {\n    const [content, setContent] = React.useState(\"\");\n    const [validationError, setValidationError] = React.useState(\"\");\n    const inputRef = React.createRef<HTMLTextAreaElement>();\n\n    const errorMessage = {\n        limitMaxChar: `Input ${MAX_CHARS} character limit reached`,\n        empty: `${title} input cannot be empty`,\n    };\n\n    const isValid = (text: string) => {\n        if (text.length < 1) {\n            setValidationError(errorMessage[\"empty\"]);\n            inputRef.current?.focus();\n            return false;\n        }\n        if (text.length === MAX_CHARS) {\n            setValidationError(errorMessage[\"limitMaxChar\"]);\n            inputRef.current?.focus();\n            return false;\n        }\n        setValidationError(\"\");\n        return true;\n    };\n\n    const handleOnChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\n        const text = e.target.value;\n        setContent(text);\n        isValid(text.trim());\n    };\n\n    function handleSubmit(e: React.FormEvent<HTMLFormElement>) {\n        e.preventDefault();\n\n        if (isValid(content)) {\n            onSubmit(content.trim());\n            setContent(\"\");\n        }\n    }\n\n    return (\n        <form onSubmit={handleSubmit} className=\"flex flex-none flex-col\">\n            <label htmlFor={`${title}-input`} className=\"sr-only\">\n                <span className=\"font-bold\">{title}</span>\n            </label>\n            <textarea\n                id={`${title}-input`}\n                ref={inputRef}\n                className={`p-1 my-1 grow bg-neutral-100 border-2 hover:border-sky-500 active:border-sky-500\n                border-neutral-200 rounded \n                ${validationError.length > 0 ? \"border-rose-600\" : \"\"}\n                `}\n                onChange={handleOnChange}\n                value={content}\n                maxLength={MAX_CHARS}\n                rows={4}\n            ></textarea>\n            <div\n                className=\"h-5 text-xs text-rose-600 italic\"\n                aria-live=\"polite\"\n            >\n                {validationError ? validationError : \"\"}\n            </div>\n            <button\n                type=\"submit\"\n                className={`py-2 rounded w-1/2 bg-sky-200\n                 hover:bg-sky-300 focus:bg-sky-300 self-end\tdisabled:bg-neutral-200`}\n                disabled={!!validationError.length || loading}\n            >\n                {cta}\n            </button>\n        </form>\n    );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}